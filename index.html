<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Book Converter</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="white">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <meta name="theme-color" content="#F2F1F6">
    <link rel="stylesheet" type="text/css" href="style.css" media="screen" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@600&display=swap" rel="stylesheet">
</head>
<body>

<h1>Book Converter</h1>

<h3 class="head">Buchl√§nge</h3>
<form>
    <input id="dTH" type="number" pattern="\d*"><br>
    <p class="dPunkt">:</p>
    <input id="dTM" type="number" pattern="\d*"><br>
</form>

<h3 class="head">Verbleibende Zeit</h3>
<form>
    <input id="dLH" type="number" pattern="\d*"><br>
    <p class="dPunkt">:</p>
    <input id="dLM" type="number" pattern="\d*"><br>
</form>

<input id="btn" type="button" value="Berechnen">
<a id="ghost-btn" href="/speed-calc.html">Wechseln zu Speed Calc</a>

<div id="full">
    <div id="boxed">
        <p id="result"></p>
    </div>
</div>

    <style>
    </style>   

<script>
    
    function getLength() {
        var lsHour = localStorage.getItem('hour');
        var lsMinute = localStorage.getItem('minute');
        console.log(lsHour + " " + lsMinute);
        document.getElementById("dTH").value = lsHour;
        document.getElementById("dTM").value = lsMinute;
        }
        
    getLength();
    
    document.getElementById("dTH").select();
    
     function formel() {
        var durationTotalH = document.getElementById("dTH").value;
        var durationTotalM = document.getElementById("dTM").value;
        var durationLeftH = document.getElementById("dLH").value;
        var durationLeftM = document.getElementById("dLM").value;
  
        var durationTotal = durationTotalH * 60 + parseInt(durationTotalM);
        var durationLeft = durationLeftH * 60 + parseInt(durationLeftM);
        var durationHeard = parseInt(durationTotal) - parseInt(durationLeft);
        //var percentage = 100 * durationHeard / durationTotal;

        //document.getElementById("result").innerHTML = (Math.round(percentage * 10) / 10) + "%";
        document.getElementById("result").innerHTML = durationHeard + " minutes";
        localStorage.setItem('hour', durationTotalH);
        localStorage.setItem('minute', durationTotalM);
    }
    
    document.getElementById("btn").onclick = function() {
        document.getElementById("boxed").style.display = "flex";
     formel();
    }

    document.getElementById("boxed").onclick = function() {
        document.getElementById("boxed").style.display = "none";
    }
    
    </script>
</body>
</html>
